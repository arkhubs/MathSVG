# 项目迭代与决策日志 (Done Log)

本文档记录了本项目从构思到最终实现的关键决策和技术迭代，按时间倒序排列。

* **架构升级**: 将核心工作流重构为“**规划-翻译**”模式，分析师负责生成分步的JSON构建计划，工程师仅负责将其翻译为代码。

* **架构升级**: 引入“**会诊**”反馈循环，将编译失败或审查不通过的反馈优先传递给分析师进行根本原因诊断。

* **架构升级**: 几何分析师的图形规划方法升级为基于坐标法和解析计算，从根本上确保了几何逻辑的精确性。

* **问题修复**: 通过在Prompt中强制注入JSON数据，解决了因工程师忘记加载数据而导致的 `NameError` 问题。

* **问题修复**: 通过在Prompt模板中转义 `{{` 和 `}}`，解决了Python字符串格式化时发生的 `KeyError`。

* **问题修复**: 通过为LLM API调用添加 `request_timeout` 参数，解决了因网络或模型加载慢而导致的程序无限挂起问题。

* **问题修复**: 通过在读取YAML文件时指定 `encoding='utf-8'`，解决了在Windows环境下因编码不匹配导致的 `UnicodeDecodeError`。

* **技术栈更换**: 因AI难以稳定生成高质量的 `svgwrite` 代码，将核心绘图技术栈从 **SVG** 更换为更适合学术场景的 **LaTeX/TikZ**。

* **初始实现**: 基于 **LangChain** 和 **LangGraph**，构建了初版的多智能体协作工作流，目标是生成SVG矢量图。

* **项目启动**: 最初尝试使用 **AutoGen** 搭建框架，但遇到了难以解决的导入bug，最终决定重构为更稳定的 **LangChain** 方案。